{% extends '_layout' %}
{% block content %}
	{# Publication Header #}
  {% set searchQuery = craft.app.request.getParam('query') %}
	<div class="container-extra-pad grid-container position-relative publications-page">
		<div class="grid-x align-center">
			<div class="cell small-11 medium-8 large-7 text-center ">
				<h1 class="c-p beta nmb">Publication search</h1>
        <h3> results for {{ searchQuery }}</h3>
				<form class="publications-search-form js-publications-search-form padding-top-3" method="POST" action="search"><input type="text" placeholder="Search Publications" name="query"><button class="icon icon-search" type="submit"><img src="/assets/icons/search.svg" alt="Search"></button>
				</form>
			</div>
		</div>
	</div>
	{# /Publication Header #}

	{# Publications #}
	<section class="grid-container publication-area publication-area--wider">
		{% set publications = craft.entries().section('publications').search(searchQuery).limit(12) %}

    {% if publications | length %}
		<div class="grid-x grid-margin-x grid-margin-y medium-up-2 large-up-3 pbb">

			{% paginate publications as publicationInfo, publicationEntries %}

				{% for publication in publicationEntries %}
					<div class="cell">
						<a href="{{ publication.url() }}" title="{{ publication.title }}">
							<article class="publication publication--large">
								<div class="publication__image-wrapper">
									{% set image = publication.featuredImage.one() %}
									{% if image | length %}
										<img src="{{ image.url('publicationThumbnail') }}" alt="{{ publication.title }}"/>
									{% else %}
										<img src="/assets/images/empty-state.svg" alt="{{ publication.title }}"/>
									{% endif %}
								</div>
								<p class="publication__content text-sans">{{ publication.title }}</p>
							</article>
						</a>
					</div>
				{% endfor %}
			</div>

			<div class="cell text-center pbb">
			{% if publicationInfo.prevUrl %}
				<a class="button" href="{{ publicationInfo.prevUrl }}">
					<span class="icon icon-caret-left"></span>Previous Publications</a>
			{% endif %}
			{% if publicationInfo.nextUrl %}
				<a class="button" href="{{ publicationInfo.nextUrl }}">Next Publications
					<span class="icon icon-caret-right"></span>
				</a>
			{% endif %}
			</div>
      {% else %}
        <div class="grid-x grid-margin-xalign-center-middle pbb">
          <div class="cell medium-10 large-6 medium-offset-1 large-offset-3 text-center">
            <p>Sorry there was no result for your search query. Please modify your search query and search again.</p>
          </div>
        </div>
      {% endif %}
		</section>
	{% endblock %}
